<section class="section">
    <div class="columns is-desktop is-centered">
        <div class="column is-half">

            <mat-card *ngIf="idea">

                <article class="media">
                    <figure class="media-left">
                        <div class="icon-bar" style="align-items: center;">
                            <span class="icon is-medium">

                                <i class="material-icons md-36">
                                    keyboard_arrow_up
                                </i>
                            </span>
                            <p style="text-align: center;">
                                {{ idea.upvotes - idea.downvotes || 0}}
                            </p>
                            <span class="icon is-medium">
                                <i class="material-icons md-36">
                                    keyboard_arrow_down
                                </i>
                            </span>
                        </div>
                    </figure>
                    <div class="media-content">
                        <div class="content">
                            <p>
                                <strong [routerLink]="['/ideas', idea.id]">{{idea.idea}}</strong>
                                <br>
                                {{ idea.description }}
                            </p>
                        </div>
                        <nav class="level is-mobile">
                            <div class="level-left">
                                Post by &nbsp;
                                <span class="has-text-warning">
                                    {{ idea.author.username}} &nbsp;
                                </span>
                                {{idea.created | dateAgo}} &nbsp;&nbsp;
                            </div>
                            <div class="level-right ">
                                <div class="level-item">
                                    <a [routerLink]="['/ideas', idea.id]">
                                        <span class="icon is-medium">
                                            <span class="fa-stack is-primary" style=" text-align: center;">
                                                <i class="far fa-comment-alt fa-stack-2x"></i>
                                                <i class="far"
                                                    style="color: black;">{{idea.comments ? idea.comments.length : 0}}</i>
                                            </span>
                                        </span>

                                    </a>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <!-- <div class="media-right">
    <button class="delete"></button>
</div> -->
                </article>
            </mat-card>

            <mat-divider></mat-divider>

            <article class="media" style="width: 600px;">
                <figure class="media-left">
                    <p class="image is-64x64">
                        <img src="https://bulma.io/images/placeholders/128x128.png">
                    </p>
                </figure>
                <form class="media-content" [formGroup]="commentForm" (ngSubmit)="submitComment()">
                    <div class="field">
                        <p class="control">
                            <textarea class="textarea" rows="2" placeholder="Add a comment..."
                                formControlName="text"></textarea>
                        </p>
                    </div>
                    <nav class="level">
                        <div class="level-left">
                            <div class="level-item">
                                <button class="button is-info" type="submit">Submit</button>
                            </div>
                        </div>
                        <div class="level-right">
                            <div class="level-item">
                                <!-- <label class="checkbox">
                                    <input type="checkbox"> Press enter to submit
                                </label> -->
                            </div>
                        </div>
                    </nav>
                </form>
            </article>

            <div *ngFor="let comment of comments | async | reverse">

                <mat-divider></mat-divider>

                <article class="media">
                    <figure class="media-left">
                        <p class="image is-64x64">
                            <img src="https://bulma.io/images/placeholders/128x128.png">
                        </p>
                    </figure>
                    <div class="media-content">
                        <div class="content">
                            <p>
                                <strong>{{ comment.author? comment.author.username : "Test check"}}</strong>
                                <br>
                                {{ comment.text }}
                                <br>
                                <small><a>Like</a> · <a>Reply</a> · 3 hrs</small>
                            </p>
                        </div>
                    </div>
                </article>
            </div>



        </div>
    </div>
</section>